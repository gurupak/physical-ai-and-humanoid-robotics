"use strict";(self.webpackChunkhackathon_book=self.webpackChunkhackathon_book||[]).push([[8896],{4469:(e,s,n)=>{n.d(s,{A:()=>a});n(6540);const r={callout:"callout_jYHE",calloutHeader:"calloutHeader_LAHO",calloutIcon:"calloutIcon_Sver",calloutTitle:"calloutTitle_Y2EA",calloutContent:"calloutContent_fpOd",note:"note_VCic",tip:"tip_s2nh",warning:"warning_eW1i",danger:"danger_zfsw",info:"info_IOty"};var i=n(4848),t={note:"\ud83d\udcdd",tip:"\ud83d\udca1",warning:"\u26a0\ufe0f",danger:"\ud83d\udea8",info:"\u2139\ufe0f"};const a=function(e){var s=e.type,n=void 0===s?"note":s,a=e.title,c=e.icon,l=e.children,o=c||t[n];return(0,i.jsxs)("div",{className:r.callout+" "+r[n],role:"note","aria-label":n+" callout",children:[(0,i.jsxs)("div",{className:r.calloutHeader,children:[(0,i.jsx)("span",{className:r.calloutIcon,children:o}),a&&(0,i.jsx)("strong",{className:r.calloutTitle,children:a})]}),(0,i.jsx)("div",{className:r.calloutContent,children:l})]})}},4471:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"ros2-fundamentals/05-services","title":"Services","description":"Topics are great for streaming data, but what if you need a response? What if you want to ask a question and wait for an answer? This is where services come in\u2014ROS 2\'s request-response communication pattern.","source":"@site/docs/ros2-fundamentals/05-services.md","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/05-services","permalink":"/physical-ai-and-humanoid-robotics/docs/ros2-fundamentals/05-services","draft":false,"unlisted":false,"editUrl":"https://github.com/gurupak/physical-ai-and-humanoid-robotics/tree/main/docs/ros2-fundamentals/05-services.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"05-services","title":"Services","sidebar_label":"Services","sidebar_position":5,"sidebar_custom_props":{"difficulty":"Intermediate","readingTime":"20 minutes","handsOnTime":"45 minutes"}},"sidebar":"tutorialSidebar","previous":{"title":"Topics & Messages","permalink":"/physical-ai-and-humanoid-robotics/docs/ros2-fundamentals/04-topics-messages"},"next":{"title":"Actions","permalink":"/physical-ai-and-humanoid-robotics/docs/ros2-fundamentals/06-actions"}}');var i=n(4848),t=n(8453),a=n(6850),c=n(4469);const l={id:"05-services",title:"Services",sidebar_label:"Services",sidebar_position:5,sidebar_custom_props:{difficulty:"Intermediate",readingTime:"20 minutes",handsOnTime:"45 minutes"}},o="Services",d={},u=[{value:"Understanding Request-Response",id:"understanding-request-response",level:2},{value:"ROS 2 Service Types",id:"ros-2-service-types",level:2},{value:"Common Service Types",id:"common-service-types",level:3},{value:"Service Definition Example",id:"service-definition-example",level:3},{value:"Creating a Service Server",id:"creating-a-service-server",level:2},{value:"Write the Server Code",id:"write-the-server-code",level:3},{value:"Update setup.py",id:"update-setuppy",level:3},{value:"Build and Run",id:"build-and-run",level:3},{value:"Creating a Service Client",id:"creating-a-service-client",level:2},{value:"Write the Client Code",id:"write-the-client-code",level:3},{value:"Update setup.py",id:"update-setuppy-1",level:3},{value:"Build and Test",id:"build-and-test",level:3},{value:"Service CLI Tools",id:"service-cli-tools",level:2},{value:"List Available Services",id:"list-available-services",level:3},{value:"Get Service Type",id:"get-service-type",level:3},{value:"Call Service from Command Line",id:"call-service-from-command-line",level:3},{value:"Advanced: Callback-Based Async Calls",id:"advanced-callback-based-async-calls",level:2},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Use Case 1: State Queries",id:"use-case-1-state-queries",level:3},{value:"Use Case 2: Triggering Actions",id:"use-case-2-triggering-actions",level:3},{value:"Use Case 3: Configuration",id:"use-case-3-configuration",level:3},{value:"What You&#39;ve Learned",id:"what-youve-learned",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"services",children:"Services"})}),"\n",(0,i.jsxs)(s.p,{children:["Topics are great for streaming data, but what if you need a ",(0,i.jsx)(s.strong,{children:"response"}),"? What if you want to ask a question and wait for an answer? This is where ",(0,i.jsx)(s.strong,{children:"services"})," come in\u2014ROS 2's request-response communication pattern."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"understanding-request-response",children:"Understanding Request-Response"}),"\n",(0,i.jsx)(s.p,{children:"Think of a service like calling a restaurant to place an order:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"You (client)"}),' make a request: "I\'d like a pizza"']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Restaurant (server)"})," processes the request"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Restaurant"}),' sends a response: "Your pizza will arrive in 30 minutes"']}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Unlike topics (where publishers don't wait for acknowledgment), ",(0,i.jsx)(s.strong,{children:"service clients block until they receive a response"}),"."]}),"\n",(0,i.jsx)(s.mermaid,{value:"sequenceDiagram\r\n    participant Client\r\n    participant Server\r\n    \r\n    Client->>Server: Request (a=2, b=3)\r\n    Note over Server: Process: sum = a + b\r\n    Server->>Client: Response (sum=5)\r\n    Note over Client: Use result (5)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Key Differences from Topics"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Synchronous"}),": Client waits for server response"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"One-to-one"}),": Each request goes to exactly one server"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Bidirectional"}),": Request flows one way, response flows back"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Transient"}),": No message history\u2014each call is independent"]}),"\n"]}),"\n",(0,i.jsx)(a.A,{question:"When should you use a service instead of a topic?",options:["When you need to send high-frequency sensor data","When you need confirmation that a request was processed and want a result","When you want multiple nodes to receive the same data","When you need asynchronous communication"],correctAnswer:1,explanation:"Services are for synchronous request-response patterns where you need confirmation and a result. Topics are for asynchronous streaming data. Use services when you need an answer (e.g., 'calculate sum', 'check if obstacle detected').",difficulty:"medium"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"ros-2-service-types",children:"ROS 2 Service Types"}),"\n",(0,i.jsx)(s.p,{children:"Like messages, services are strongly typed. A service type defines:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Request"}),": Data sent from client to server"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Response"}),": Data sent from server back to client"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"common-service-types",children:"Common Service Types"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"std_srvs"}),": Simple triggers"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from std_srvs.srv import Trigger, SetBool, Empty\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"example_interfaces"}),": Basic operations"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts, SetBool\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"nav_msgs"}),": Navigation services"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from nav_msgs.srv import GetMap, GetPlan\n"})}),"\n",(0,i.jsx)(s.h3,{id:"service-definition-example",children:"Service Definition Example"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# example_interfaces/srv/AddTwoInts.srv\r\n\r\n# Request\r\nint64 a\r\nint64 b\r\n---\r\n# Response\r\nint64 sum\n"})}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"---"})," separator divides request fields from response fields."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"creating-a-service-server",children:"Creating a Service Server"}),"\n",(0,i.jsx)(s.p,{children:"Let's create a server that adds two integers."}),"\n",(0,i.jsx)(s.h3,{id:"write-the-server-code",children:"Write the Server Code"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="my_first_package/add_server.py" showLineNumbers {2,10-13,15-20}',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\nclass AddTwoIntsServer(Node):\r\n    def __init__(self):\r\n        super().__init__('add_two_ints_server')\r\n        \r\n        # Create service: service type, service name, callback\r\n        self.srv = self.create_service(\r\n            AddTwoInts,\r\n            'add_two_ints',\r\n            self.add_two_ints_callback)\r\n        \r\n        self.get_logger().info('Add Two Ints Server is ready')\r\n    \r\n    def add_two_ints_callback(self, request, response):\r\n        response.sum = request.a + request.b\r\n        self.get_logger().info(f'Request: {request.a} + {request.b} = {response.sum}')\r\n        return response\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = AddTwoIntsServer()\r\n    \r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Code Breakdown"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Line 10-13"}),": Create service with type, name, and callback"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Lines 17-20"}),": Callback receives ",(0,i.jsx)(s.code,{children:"request"})," object, populates ",(0,i.jsx)(s.code,{children:"response"})," object, returns it"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Request Access"}),": ",(0,i.jsx)(s.code,{children:"request.a"})," and ",(0,i.jsx)(s.code,{children:"request.b"})," are the two integers"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Response"}),": ",(0,i.jsx)(s.code,{children:"response.sum"})," is the result"]}),"\n"]}),"\n",(0,i.jsx)(c.A,{type:"info",title:"Service Callbacks Must Return Response",children:(0,i.jsxs)(s.p,{children:["Unlike topic callbacks (which return nothing), service callbacks ",(0,i.jsx)(s.strong,{children:"must return the response object"}),". If you forget, clients will hang waiting forever!"]})}),"\n",(0,i.jsx)(s.h3,{id:"update-setuppy",children:"Update setup.py"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="setup.py" {24}',children:"entry_points={\r\n    'console_scripts': [\r\n        'publisher = my_first_package.publisher_node:main',\r\n        'subscriber = my_first_package.subscriber_node:main',\r\n        'add_server = my_first_package.add_server:main',\r\n    ],\r\n},\n"})}),"\n",(0,i.jsx)(s.h3,{id:"build-and-run",children:"Build and Run"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select my_first_package\r\nsource ~/ros2_ws/install/setup.bash\r\n\r\nros2 run my_first_package add_server\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[INFO] [add_two_ints_server]: Add Two Ints Server is ready\n"})}),"\n",(0,i.jsx)(s.p,{children:"Server is now waiting for requests!"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"creating-a-service-client",children:"Creating a Service Client"}),"\n",(0,i.jsx)(s.p,{children:"Now let's write a client to call the server."}),"\n",(0,i.jsx)(s.h3,{id:"write-the-client-code",children:"Write the Client Code"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="my_first_package/add_client.py" showLineNumbers {2,10-11,15-19,21-28}',children:"import sys\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\nclass AddTwoIntsClient(Node):\r\n    def __init__(self):\r\n        super().__init__('add_two_ints_client')\r\n        \r\n        # Create client: service type, service name\r\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\r\n        \r\n        # Wait for service to be available\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Service not available, waiting...')\r\n    \r\n    def send_request(self, a, b):\r\n        # Create request\r\n        req = AddTwoInts.Request()\r\n        req.a = a\r\n        req.b = b\r\n        \r\n        # Call service asynchronously\r\n        future = self.cli.call_async(req)\r\n        rclpy.spin_until_future_complete(self, future)\r\n        \r\n        if future.result() is not None:\r\n            return future.result()\r\n        else:\r\n            self.get_logger().error('Service call failed')\r\n            return None\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    \r\n    # Get numbers from command line\r\n    if len(sys.argv) != 3:\r\n        print('Usage: ros2 run my_first_package add_client <a> <b>')\r\n        return\r\n    \r\n    node = AddTwoIntsClient()\r\n    result = node.send_request(int(sys.argv[1]), int(sys.argv[2]))\r\n    \r\n    if result:\r\n        node.get_logger().info(f'Result: {sys.argv[1]} + {sys.argv[2]} = {result.sum}')\r\n    \r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Code Breakdown"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Lines 15-16"}),": Wait for server to be available (timeout if not found)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Lines 18-21"}),": Create and populate request object"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Line 24"}),": Call service asynchronously (non-blocking)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Line 25"}),": Wait for response to complete"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Lines 27-30"}),": Handle result or error"]}),"\n"]}),"\n",(0,i.jsx)(c.A,{type:"warning",title:"Avoid Deadlocks with Async Calls",children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Never"})," use ",(0,i.jsx)(s.code,{children:"call()"})," (synchronous) from within a callback\u2014it will deadlock! Always use ",(0,i.jsx)(s.code,{children:"call_async()"})," and handle the future with ",(0,i.jsx)(s.code,{children:"spin_until_future_complete()"})," or callbacks."]})}),"\n",(0,i.jsx)(s.h3,{id:"update-setuppy-1",children:"Update setup.py"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="setup.py" {25}',children:"entry_points={\r\n    'console_scripts': [\r\n        'publisher = my_first_package.publisher_node:main',\r\n        'subscriber = my_first_package.subscriber_node:main',\r\n        'add_server = my_first_package.add_server:main',\r\n        'add_client = my_first_package.add_client:main',\r\n    ],\r\n},\n"})}),"\n",(0,i.jsx)(s.h3,{id:"build-and-test",children:"Build and Test"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"colcon build --packages-select my_first_package\r\nsource ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Terminal 1 (Server)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_package add_server\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Terminal 2 (Client)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_package add_client 5 7\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output (Terminal 2)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[INFO] [add_two_ints_client]: Result: 5 + 7 = 12\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output (Terminal 1)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[INFO] [add_two_ints_server]: Request: 5 + 7 = 12\n"})}),"\n",(0,i.jsxs)(s.p,{children:["\ud83c\udf89 ",(0,i.jsx)(s.strong,{children:"Success!"})," Client and server are communicating."]}),"\n",(0,i.jsx)(a.A,{question:"What would happen if you called `self.cli.call()` (synchronous) inside a timer callback?",options:["The service call would complete normally","A deadlock would occur because the executor can't process the response while blocked","The timer would stop running","The service call would fail with a timeout error"],correctAnswer:1,explanation:"Synchronous `call()` blocks the executor thread, but the service response needs the executor to process it. This creates a deadlock. Always use `call_async()` and handle futures properly.",difficulty:"hard"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"service-cli-tools",children:"Service CLI Tools"}),"\n",(0,i.jsx)(s.h3,{id:"list-available-services",children:"List Available Services"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 service list\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/add_two_ints\r\n/add_two_ints_client/describe_parameters\r\n/add_two_ints_server/describe_parameters\r\n...\n"})}),"\n",(0,i.jsx)(s.h3,{id:"get-service-type",children:"Get Service Type"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 service type /add_two_ints\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"example_interfaces/srv/AddTwoInts\n"})}),"\n",(0,i.jsx)(s.h3,{id:"call-service-from-command-line",children:"Call Service from Command Line"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts "{a: 10, b: 15}"\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"waiting for service to become available...\r\nrequester: making request: example_interfaces.srv.AddTwoInts_Request(a=10, b=15)\r\n\r\nresponse:\r\nexample_interfaces.srv.AddTwoInts_Response(sum=25)\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"advanced-callback-based-async-calls",children:"Advanced: Callback-Based Async Calls"}),"\n",(0,i.jsxs)(s.p,{children:["Instead of blocking with ",(0,i.jsx)(s.code,{children:"spin_until_future_complete()"}),", use callbacks:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def send_request_async(self, a, b):\r\n    req = AddTwoInts.Request()\r\n    req.a = a\r\n    req.b = b\r\n    \r\n    # Attach callback to future\r\n    future = self.cli.call_async(req)\r\n    future.add_done_callback(self.response_callback)\r\n\r\ndef response_callback(self, future):\r\n    try:\r\n        result = future.result()\r\n        self.get_logger().info(f'Result: {result.sum}')\r\n    except Exception as e:\r\n        self.get_logger().error(f'Service call failed: {e}')\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Benefits"}),": Non-blocking, allows handling multiple requests in parallel."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,i.jsx)(s.h3,{id:"use-case-1-state-queries",children:"Use Case 1: State Queries"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),": Check if an obstacle is detected"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# Service: GetObstacleState (custom)\r\nRequest:\r\n  # Empty\r\nResponse:\r\n  bool obstacle_detected\r\n  float32 distance\n"})}),"\n",(0,i.jsx)(s.h3,{id:"use-case-2-triggering-actions",children:"Use Case 2: Triggering Actions"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),": Reset odometry"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# Service: std_srvs/Trigger\r\nRequest:\r\n  # Empty\r\nResponse:\r\n  bool success\r\n  string message\n"})}),"\n",(0,i.jsx)(s.h3,{id:"use-case-3-configuration",children:"Use Case 3: Configuration"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),": Set camera exposure"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# Service: SetCameraExposure (custom)\r\nRequest:\r\n  int32 exposure_time\r\nResponse:\r\n  bool success\r\n  string message\n"})}),"\n",(0,i.jsxs)(c.A,{type:"tip",title:"When NOT to Use Services",children:[(0,i.jsx)(s.p,{children:"Avoid services for:"}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"High-frequency data"})," (sensor streams) \u2192 Use topics"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Long-running tasks"})," (navigation to goal) \u2192 Use actions"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Broadcasting to multiple nodes"})," \u2192 Use topics"]}),"\n"]}),(0,i.jsx)(s.p,{children:"Services are for quick, synchronous operations that need a response."})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"what-youve-learned",children:"What You've Learned"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Services"})," provide synchronous request-response communication"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Service servers"})," handle requests and return responses via callbacks"]}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Service clients"})," send requests and wait for responses (use ",(0,i.jsx)(s.code,{children:"call_async()"})," to avoid deadlocks)"]}),"\n",(0,i.jsx)(s.li,{children:"\u2705 Service types define request and response structures"}),"\n",(0,i.jsxs)(s.li,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"ros2 CLI tools"})," for listing, inspecting, and calling services"]}),"\n",(0,i.jsx)(s.li,{children:"\u2705 Use cases: state queries, triggering actions, configuration"}),"\n"]}),"\n",(0,i.jsx)(a.A,{question:"What is the key difference between a topic and a service in ROS 2?",options:["Topics are faster than services","Topics are asynchronous (fire-and-forget), services are synchronous (request-response)","Services can have multiple servers, topics can only have one publisher","Topics use DDS, services use TCP"],correctAnswer:1,explanation:"The fundamental difference is the communication pattern: topics are asynchronous (publishers don't wait for acknowledgment), while services are synchronous (clients block waiting for a response from the server).",difficulty:"medium"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(s.p,{children:["Services handle short, synchronous operations. But what about ",(0,i.jsx)(s.strong,{children:"long-running tasks"})," that provide progress feedback? That's where ",(0,i.jsx)(s.strong,{children:"actions"})," come in!"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Continue to"}),": ",(0,i.jsx)(s.a,{href:"06-actions",children:"Actions"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsx)(s.admonition,{title:"Dive Deeper",type:"info",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html",children:"ROS 2 Service Tutorial"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros2.org/humble/api/",children:"Service Type Reference"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Services.html",children:"Async Service Calls"})}),"\n"]})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},6850:(e,s,n)=>{n.d(s,{A:()=>a});var r=n(6540);const i={quizContainer:"quizContainer_Ly96",quizHeader:"quizHeader_Qo06",quizLabel:"quizLabel_MaFv",difficultyBadge:"difficultyBadge_Wo6d",easy:"easy_isbn",medium:"medium_p6MP",hard:"hard_P2Aa",question:"question_cvou",codeSnippet:"codeSnippet__bHr",options:"options_VfkM",option:"option_Jqpj",selected:"selected_wvvN",correct:"correct_o2Yu",incorrect:"incorrect_BE9l",optionLetter:"optionLetter_VWfV",optionText:"optionText_Aap0",checkmark:"checkmark_dcs6",cross:"cross_Hcmk",feedback:"feedback_Z1tN",feedbackCorrect:"feedbackCorrect_KhSC",feedbackIncorrect:"feedbackIncorrect_PbO3",feedbackHeader:"feedbackHeader__j5R",feedbackIcon:"feedbackIcon_B5j3",explanation:"explanation_VZj9",retryButton:"retryButton_OmlM"};var t=n(4848);const a=function(e){var s=e.question,n=e.options,a=e.correctAnswer,c=e.explanation,l=(e.type,e.codeSnippet),o=e.difficulty,d=void 0===o?"medium":o,u=(0,r.useState)(null),h=u[0],p=u[1],x=(0,r.useState)(!1),m=x[0],v=x[1],j=h===a;return(0,t.jsxs)("div",{className:"quiz-container "+i.quizContainer,"data-difficulty":d,children:[(0,t.jsxs)("div",{className:i.quizHeader,children:[(0,t.jsx)("span",{className:i.quizLabel,children:"Quiz"}),d&&(0,t.jsx)("span",{className:i.difficultyBadge+" "+i[d],children:d.charAt(0).toUpperCase()+d.slice(1)})]}),(0,t.jsx)("div",{className:i.question,children:s}),l&&(0,t.jsx)("pre",{className:i.codeSnippet,children:(0,t.jsx)("code",{children:l})}),(0,t.jsx)("div",{className:i.options,children:n.map(function(e,s){return(0,t.jsxs)("button",{className:i.option+" "+(h===s?i.selected:"")+" "+(m&&s===a?i.correct:m&&h===s?i.incorrect:""),onClick:function(){return function(e){m||(p(e),v(!0))}(s)},disabled:m,"aria-pressed":h===s,children:[(0,t.jsxs)("span",{className:i.optionLetter,children:[String.fromCharCode(65+s),"."]}),(0,t.jsx)("span",{className:i.optionText,children:e}),m&&s===a&&(0,t.jsx)("span",{className:i.checkmark,children:"\u2713"}),m&&h===s&&s!==a&&(0,t.jsx)("span",{className:i.cross,children:"\u2717"})]},s)})}),m&&(0,t.jsxs)("div",{className:i.feedback+" "+(j?i.feedbackCorrect:i.feedbackIncorrect),children:[(0,t.jsx)("div",{className:i.feedbackHeader,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:i.feedbackIcon,children:"\u2713"}),(0,t.jsx)("strong",{children:"Correct!"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:i.feedbackIcon,children:"\u2717"}),(0,t.jsx)("strong",{children:"Not quite right"})]})}),(0,t.jsx)("div",{className:i.explanation,children:c}),(0,t.jsx)("button",{className:i.retryButton,onClick:function(){p(null),v(!1)},children:"Try Again"})]})]})}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>c});var r=n(6540);const i={},t=r.createContext(i);function a(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);