"use strict";(self.webpackChunkhackathon_book=self.webpackChunkhackathon_book||[]).push([[6062],{4469:(e,n,s)=>{s.d(n,{A:()=>a});s(6540);const i={callout:"callout_jYHE",calloutHeader:"calloutHeader_LAHO",calloutIcon:"calloutIcon_Sver",calloutTitle:"calloutTitle_Y2EA",calloutContent:"calloutContent_fpOd",note:"note_VCic",tip:"tip_s2nh",warning:"warning_eW1i",danger:"danger_zfsw",info:"info_IOty"};var r=s(4848),o={note:"\ud83d\udcdd",tip:"\ud83d\udca1",warning:"\u26a0\ufe0f",danger:"\ud83d\udea8",info:"\u2139\ufe0f"};const a=function(e){var n=e.type,s=void 0===n?"note":n,a=e.title,c=e.icon,l=e.children,t=c||o[s];return(0,r.jsxs)("div",{className:i.callout+" "+i[s],role:"note","aria-label":s+" callout",children:[(0,r.jsxs)("div",{className:i.calloutHeader,children:[(0,r.jsx)("span",{className:i.calloutIcon,children:t}),a&&(0,r.jsx)("strong",{className:i.calloutTitle,children:a})]}),(0,r.jsx)("div",{className:i.calloutContent,children:l})]})}},6850:(e,n,s)=>{s.d(n,{A:()=>a});var i=s(6540);const r={quizContainer:"quizContainer_Ly96",quizHeader:"quizHeader_Qo06",quizLabel:"quizLabel_MaFv",difficultyBadge:"difficultyBadge_Wo6d",easy:"easy_isbn",medium:"medium_p6MP",hard:"hard_P2Aa",question:"question_cvou",codeSnippet:"codeSnippet__bHr",options:"options_VfkM",option:"option_Jqpj",selected:"selected_wvvN",correct:"correct_o2Yu",incorrect:"incorrect_BE9l",optionLetter:"optionLetter_VWfV",optionText:"optionText_Aap0",checkmark:"checkmark_dcs6",cross:"cross_Hcmk",feedback:"feedback_Z1tN",feedbackCorrect:"feedbackCorrect_KhSC",feedbackIncorrect:"feedbackIncorrect_PbO3",feedbackHeader:"feedbackHeader__j5R",feedbackIcon:"feedbackIcon_B5j3",explanation:"explanation_VZj9",retryButton:"retryButton_OmlM"};var o=s(4848);const a=function(e){var n=e.question,s=e.options,a=e.correctAnswer,c=e.explanation,l=(e.type,e.codeSnippet),t=e.difficulty,d=void 0===t?"medium":t,h=(0,i.useState)(null),u=h[0],p=h[1],g=(0,i.useState)(!1),x=g[0],m=g[1],j=u===a;return(0,o.jsxs)("div",{className:"quiz-container "+r.quizContainer,"data-difficulty":d,children:[(0,o.jsxs)("div",{className:r.quizHeader,children:[(0,o.jsx)("span",{className:r.quizLabel,children:"Quiz"}),d&&(0,o.jsx)("span",{className:r.difficultyBadge+" "+r[d],children:d.charAt(0).toUpperCase()+d.slice(1)})]}),(0,o.jsx)("div",{className:r.question,children:n}),l&&(0,o.jsx)("pre",{className:r.codeSnippet,children:(0,o.jsx)("code",{children:l})}),(0,o.jsx)("div",{className:r.options,children:s.map(function(e,n){return(0,o.jsxs)("button",{className:r.option+" "+(u===n?r.selected:"")+" "+(x&&n===a?r.correct:x&&u===n?r.incorrect:""),onClick:function(){return function(e){x||(p(e),m(!0))}(n)},disabled:x,"aria-pressed":u===n,children:[(0,o.jsxs)("span",{className:r.optionLetter,children:[String.fromCharCode(65+n),"."]}),(0,o.jsx)("span",{className:r.optionText,children:e}),x&&n===a&&(0,o.jsx)("span",{className:r.checkmark,children:"\u2713"}),x&&u===n&&n!==a&&(0,o.jsx)("span",{className:r.cross,children:"\u2717"})]},n)})}),x&&(0,o.jsxs)("div",{className:r.feedback+" "+(j?r.feedbackCorrect:r.feedbackIncorrect),children:[(0,o.jsx)("div",{className:r.feedbackHeader,children:j?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:r.feedbackIcon,children:"\u2713"}),(0,o.jsx)("strong",{children:"Correct!"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:r.feedbackIcon,children:"\u2717"}),(0,o.jsx)("strong",{children:"Not quite right"})]})}),(0,o.jsx)("div",{className:r.explanation,children:c}),(0,o.jsx)("button",{className:r.retryButton,onClick:function(){p(null),m(!1)},children:"Try Again"})]})]})}},8427:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"ros2-fundamentals/08-best-practices","title":"Best Practices & Debugging","description":"Congratulations! You\'ve learned all the core ROS 2 concepts. This final sub-chapter consolidates best practices, debugging techniques, and patterns for production-ready code.","source":"@site/docs/ros2-fundamentals/08-best-practices.md","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/08-best-practices","permalink":"/physical-ai-and-humanoid-robotics/docs/ros2-fundamentals/08-best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/gurupak/physical-ai-and-humanoid-robotics/tree/main/docs/ros2-fundamentals/08-best-practices.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"id":"08-best-practices","title":"Best Practices & Debugging","sidebar_label":"Best Practices","sidebar_position":8,"sidebar_custom_props":{"difficulty":"Intermediate","readingTime":"15 minutes","handsOnTime":"30 minutes"}},"sidebar":"tutorialSidebar","previous":{"title":"Parameters & Launch","permalink":"/physical-ai-and-humanoid-robotics/docs/ros2-fundamentals/07-parameters-launch"},"next":{"title":"Module 2: The Digital Twin - Gazebo & Unity Simulation","permalink":"/physical-ai-and-humanoid-robotics/docs/module-2-digital-twin/"}}');var r=s(4848),o=s(8453),a=s(6850),c=s(4469);const l={id:"08-best-practices",title:"Best Practices & Debugging",sidebar_label:"Best Practices",sidebar_position:8,sidebar_custom_props:{difficulty:"Intermediate",readingTime:"15 minutes",handsOnTime:"30 minutes"}},t="Best Practices & Debugging",d={},h=[{value:"Naming Conventions",id:"naming-conventions",level:2},{value:"Node Names",id:"node-names",level:3},{value:"Topic Names",id:"topic-names",level:3},{value:"Package Names",id:"package-names",level:3},{value:"Code Structure Best Practices",id:"code-structure-best-practices",level:2},{value:"1. Always Use Try-Finally for Cleanup",id:"1-always-use-try-finally-for-cleanup",level:3},{value:"2. Use Logger, Not Print",id:"2-use-logger-not-print",level:3},{value:"3. Validate Parameters",id:"3-validate-parameters",level:3},{value:"4. Use Type Hints",id:"4-use-type-hints",level:3},{value:"Debugging Tools",id:"debugging-tools",level:2},{value:"1. <code>ros2 node</code> - Node Inspection",id:"1-ros2-node---node-inspection",level:3},{value:"2. <code>ros2 topic</code> - Topic Inspection",id:"2-ros2-topic---topic-inspection",level:3},{value:"3. <code>rqt_graph</code> - Visualize Nodes and Topics",id:"3-rqt_graph---visualize-nodes-and-topics",level:3},{value:"4. <code>ros2 bag</code> - Record and Playback",id:"4-ros2-bag---record-and-playback",level:3},{value:"Common Debugging Scenarios",id:"common-debugging-scenarios",level:2},{value:"Scenario 1: Publisher/Subscriber Not Communicating",id:"scenario-1-publishersubscriber-not-communicating",level:3},{value:"Scenario 2: Node Crashes with &quot;rcl not initialized&quot;",id:"scenario-2-node-crashes-with-rcl-not-initialized",level:3},{value:"Scenario 3: Service Call Hangs Forever",id:"scenario-3-service-call-hangs-forever",level:3},{value:"Performance Best Practices",id:"performance-best-practices",level:2},{value:"1. Choose Appropriate Queue Sizes",id:"1-choose-appropriate-queue-sizes",level:3},{value:"2. Avoid Heavy Computation in Callbacks",id:"2-avoid-heavy-computation-in-callbacks",level:3},{value:"3. Use Composition for Low Latency",id:"3-use-composition-for-low-latency",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"1. Never Hardcode Credentials",id:"1-never-hardcode-credentials",level:3},{value:"2. Validate External Input",id:"2-validate-external-input",level:3},{value:"What You&#39;ve Learned",id:"what-youve-learned",level:2},{value:"Chapter Summary",id:"chapter-summary",level:2},{value:"Where to Go Next",id:"where-to-go-next",level:3},{value:"Final Quiz",id:"final-quiz",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"best-practices--debugging",children:"Best Practices & Debugging"})}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You've learned all the core ROS 2 concepts. This final sub-chapter consolidates best practices, debugging techniques, and patterns for production-ready code."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,r.jsx)(n.h3,{id:"node-names",children:"Node Names"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Do"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"self = Node('camera_driver')          # Lowercase, underscores\nself = Node('object_detector_node')   # Descriptive\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Don't"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"self = Node('Node1')                  # Generic\nself = Node('cameraDriver')           # CamelCase\n"})}),"\n",(0,r.jsx)(n.h3,{id:"topic-names",children:"Topic Names"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Do"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/robot/camera/image_raw               # Hierarchical, namespaced\n/cmd_vel                              # Standard ROS 2 convention\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Don't"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/Image                                # Capitalized\n/myTopic123                           # Non-descriptive\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package-names",children:"Package Names"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Do"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"robot_bringup"}),", ",(0,r.jsx)(n.code,{children:"my_robot_navigation"}),", ",(0,r.jsx)(n.code,{children:"sensor_drivers"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Don't"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MyPackage"}),", ",(0,r.jsx)(n.code,{children:"pkg1"}),", ",(0,r.jsx)(n.code,{children:"RobotStuff"})]}),"\n"]}),"\n",(0,r.jsxs)(c.A,{type:"tip",title:"Standard ROS 2 Topic Names",children:[(0,r.jsx)(n.p,{children:"Follow established conventions:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/cmd_vel"})," - velocity commands"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/odom"})," - odometry"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/scan"})," - laser scan"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/camera/image_raw"})," - camera images"]}),"\n"]}),(0,r.jsx)(n.p,{children:"This improves interoperability with existing packages."})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"code-structure-best-practices",children:"Code Structure Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-always-use-try-finally-for-cleanup",children:"1. Always Use Try-Finally for Cleanup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why"}),": Ensures cleanup happens even if errors occur."]}),"\n",(0,r.jsx)(n.h3,{id:"2-use-logger-not-print",children:"2. Use Logger, Not Print"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Bad"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"print(f'Publishing message: {msg.data}')\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Good"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"self.get_logger().info(f'Publishing message: {msg.data}')\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Logger Levels"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"debug()"})," - Detailed diagnostic info"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"info()"})," - General informational messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"warn()"})," - Warning messages (non-critical)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error()"})," - Error messages (critical)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fatal()"})," - Fatal errors (node cannot continue)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-validate-parameters",children:"3. Validate Parameters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def __init__(self):\n    super().__init__('my_node')\n    \n    self.declare_parameter('max_speed', 1.0)\n    max_speed = self.get_parameter('max_speed').value\n    \n    # Validate range\n    if max_speed <= 0 or max_speed > 10.0:\n        self.get_logger().error(f'Invalid max_speed: {max_speed}. Must be 0-10.')\n        raise ValueError('Invalid parameter')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-use-type-hints",children:"4. Use Type Hints"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MyPublisher(Node):\n    def __init__(self) -> None:\n        super().__init__('publisher')\n        self.publisher_: Publisher = self.create_publisher(String, 'topic', 10)\n        \n    def publish_message(self, data: str) -> None:\n        msg = String()\n        msg.data = data\n        self.publisher_.publish(msg)\n"})}),"\n",(0,r.jsx)(a.A,{question:"Why should you use `self.get_logger().info()` instead of `print()` in ROS 2 nodes?",options:["Loggers are faster than print statements","Loggers provide severity levels, timestamps, and integration with ROS 2 logging tools","Print statements are not supported in Python 3","Loggers use less memory"],correctAnswer:1,explanation:"ROS 2 loggers provide severity levels (info/warn/error), automatic timestamps, node name prefixes, and integration with tools like rqt_console for filtering and analysis. Print statements bypass all of this infrastructure.",difficulty:"easy"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"debugging-tools",children:"Debugging Tools"}),"\n",(0,r.jsxs)(n.h3,{id:"1-ros2-node---node-inspection",children:["1. ",(0,r.jsx)(n.code,{children:"ros2 node"})," - Node Inspection"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List running nodes\nros2 node list\n\n# Get node info (publishers, subscribers, services, actions)\nros2 node info /my_node\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example Output"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/my_node\n  Subscribers:\n    /parameter_events: rcl_interfaces/msg/ParameterEvent\n  Publishers:\n    /rosout: rcl_interfaces/msg/Log\n    /chatter: std_msgs/msg/String\n  Service Servers:\n    /my_node/describe_parameters: ...\n  Service Clients:\n\n  Action Servers:\n\n  Action Clients:\n\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"2-ros2-topic---topic-inspection",children:["2. ",(0,r.jsx)(n.code,{children:"ros2 topic"})," - Topic Inspection"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List topics\nros2 topic list\n\n# Show message rate\nros2 topic hz /chatter\n\n# Show bandwidth\nros2 topic bw /camera/image\n\n# Echo messages with message rate\nros2 topic echo /chatter --once\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"3-rqt_graph---visualize-nodes-and-topics",children:["3. ",(0,r.jsx)(n.code,{children:"rqt_graph"})," - Visualize Nodes and Topics"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rqt_graph\n"})}),"\n",(0,r.jsx)(n.p,{children:"This opens a GUI showing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All nodes (ovals)"}),"\n",(0,r.jsx)(n.li,{children:"All topics (rectangles)"}),"\n",(0,r.jsx)(n.li,{children:"Connections (arrows)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": Quickly verify your system's communication graph."]}),"\n",(0,r.jsxs)(n.h3,{id:"4-ros2-bag---record-and-playback",children:["4. ",(0,r.jsx)(n.code,{children:"ros2 bag"})," - Record and Playback"]}),"\n",(0,r.jsx)(n.p,{children:"Record messages for later analysis:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Record all topics\nros2 bag record -a\n\n# Record specific topics\nros2 bag record /camera/image /odom\n\n# Playback\nros2 bag play my_bag/\n"})}),"\n",(0,r.jsx)(c.A,{type:"tip",title:"Debugging with Bag Files",children:(0,r.jsxs)(n.p,{children:["Record a problematic scenario with ",(0,r.jsx)(n.code,{children:"ros2 bag record"}),", then play it back repeatedly while testing fixes. This is invaluable for intermittent bugs!"]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-debugging-scenarios",children:"Common Debugging Scenarios"}),"\n",(0,r.jsx)(n.h3,{id:"scenario-1-publishersubscriber-not-communicating",children:"Scenario 1: Publisher/Subscriber Not Communicating"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Subscriber receives no messages even though publisher is running."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Check both nodes are running"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify topic names match"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\nros2 topic info /chatter\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Check QoS compatibility"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /chatter -v\n"})}),"\n",(0,r.jsx)(n.p,{children:"Look for QoS mismatches (e.g., publisher is BEST_EFFORT, subscriber is RELIABLE)."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Echo the topic"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /chatter\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you see messages here but subscriber doesn't, the issue is in subscriber code."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-2-node-crashes-with-rcl-not-initialized",children:'Scenario 2: Node Crashes with "rcl not initialized"'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Forgot to call ",(0,r.jsx)(n.code,{children:"rclpy.init()"})," before creating nodes."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def main(args=None):\n    rclpy.init(args=args)  # \u2190 Must be first\n    node = MyNode()\n    rclpy.spin(node)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"scenario-3-service-call-hangs-forever",children:"Scenario 3: Service Call Hangs Forever"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Service server not running or wrong service name."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check if service exists\nros2 service list\n\n# Try calling from CLI\nros2 service call /add_two_ints example_interfaces/srv/AddTwoInts "{a: 2, b: 3}"\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"performance-best-practices",children:"Performance Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-choose-appropriate-queue-sizes",children:"1. Choose Appropriate Queue Sizes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# High-frequency sensor data (allow dropping old messages)\nself.publisher_ = self.create_publisher(Image, '/camera/image', 10)\n\n# Critical commands (don't lose messages)\nself.publisher_ = self.create_publisher(Twist, '/cmd_vel', 100)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rule of Thumb"}),": Queue size = publish rate \xd7 expected max delay"]}),"\n",(0,r.jsx)(n.h3,{id:"2-avoid-heavy-computation-in-callbacks",children:"2. Avoid Heavy Computation in Callbacks"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Bad"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def image_callback(self, msg):\n    # Heavy processing (blocks executor)\n    processed = self.run_neural_network(msg)\n    self.publish_result(processed)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Good"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def image_callback(self, msg):\n    # Queue message for processing\n    self.image_queue.put(msg)\n\n# Process in separate thread\ndef processing_thread(self):\n    while rclpy.ok():\n        msg = self.image_queue.get()\n        processed = self.run_neural_network(msg)\n        self.publish_result(processed)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-use-composition-for-low-latency",children:"3. Use Composition for Low Latency"}),"\n",(0,r.jsx)(n.p,{children:"Instead of separate processes, run multiple nodes in one process:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.executors import SingleThreadedExecutor\n\nexecutor = SingleThreadedExecutor()\nexecutor.add_node(node1)\nexecutor.add_node(node2)\nexecutor.spin()\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-never-hardcode-credentials",children:"1. Never Hardcode Credentials"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Bad"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'API_KEY = "12345-secret-key"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Good"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import os\nAPI_KEY = os.getenv('ROBOT_API_KEY')\nif not API_KEY:\n    raise ValueError('ROBOT_API_KEY environment variable not set')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-validate-external-input",children:"2. Validate External Input"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def command_callback(self, msg):\n    # Validate velocity is within safe limits\n    if abs(msg.linear.x) > MAX_SPEED:\n        self.get_logger().warn(f'Velocity {msg.linear.x} exceeds max {MAX_SPEED}')\n        return\n    \n    self.send_to_motors(msg)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"what-youve-learned",children:"What You've Learned"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Naming conventions"})," for nodes, topics, packages"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Code structure"})," best practices (cleanup, logging, validation)"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Debugging tools"})," (",(0,r.jsx)(n.code,{children:"ros2 node"}),", ",(0,r.jsx)(n.code,{children:"ros2 topic"}),", ",(0,r.jsx)(n.code,{children:"rqt_graph"}),", ",(0,r.jsx)(n.code,{children:"ros2 bag"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Common debugging scenarios"})," and solutions"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Performance tips"})," (queue sizes, threading, composition)"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Security practices"})," (no hardcoded secrets, input validation)"]}),"\n"]}),"\n",(0,r.jsx)(a.A,{question:"What tool would you use to visualize the connections between nodes and topics in your ROS 2 system?",options:["ros2 node list","rqt_graph","ros2 topic echo","ros2 bag"],correctAnswer:1,explanation:"`rqt_graph` provides a visual representation of the ROS 2 computational graph, showing nodes, topics, and their connections. This is invaluable for understanding and debugging complex systems.",difficulty:"easy"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"chapter-summary",children:"Chapter Summary"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Congratulations!"})," \ud83c\udf89 You've completed Chapter 1: ROS 2 Fundamentals. You now understand:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Overview"}),": What ROS 2 is and why it's revolutionary"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Installation"}),": Setting up ROS 2 Humble"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Your First Node"}),": Creating publishers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics & Messages"}),": Asynchronous pub-sub communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Synchronous request-response"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),": Long-running tasks with feedback"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters & Launch"}),": Configuration and orchestration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Best Practices"}),": Production-ready patterns and debugging"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"where-to-go-next",children:"Where to Go Next"}),"\n",(0,r.jsx)(n.p,{children:"You're ready to build real robotic applications! Consider exploring:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 2"}),": Simulation with Gazebo and Isaac Sim"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 3"}),": Robot perception (cameras, lidar, computer vision)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 4"}),": Navigation and path planning"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 5"}),": Manipulation and control"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"final-quiz",children:"Final Quiz"}),"\n",(0,r.jsx)(a.A,{question:"Which communication pattern would you use for a task that takes 30 seconds, provides progress updates every 2 seconds, and can be canceled midway?",options:["Topic (publish-subscribe)","Service (request-response)","Action (goal-feedback-result)","Parameter"],correctAnswer:2,explanation:"Actions are designed for long-running tasks that provide periodic feedback and support cancellation. Topics don't provide responses, services don't support feedback or cancellation, and parameters are for configuration, not tasks.",difficulty:"hard"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsx)(n.admonition,{title:"Continue Learning",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/",children:"ROS 2 Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials.html",children:"ROS 2 Tutorials"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://discourse.ros.org/",children:"ROS Discourse Forum"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/fkromer/awesome-ros2",children:"awesome-ros2"})," - Curated list of ROS 2 resources"]}),"\n"]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Thank you for completing Chapter 1!"})," You're well on your way to becoming a ROS 2 developer. \ud83e\udd16"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);