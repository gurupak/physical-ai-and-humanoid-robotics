"use strict";(self.webpackChunkhackathon_book=self.webpackChunkhackathon_book||[]).push([[1640],{8453:(e,a,n)=>{n.d(a,{R:()=>s,x:()=>o});var i=n(6540);const t={},r=i.createContext(t);function s(e){const a=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(r.Provider,{value:a},e.children)}},9380:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"chapter-3-isaac-ai-brain/ros2-integration","title":"ROS2 Integration Guide","description":"Connect Isaac Sim simulation to ROS2 ecosystem for real-time data exchange and control.","source":"@site/docs/chapter-3-isaac-ai-brain/ros2-integration.md","sourceDirName":"chapter-3-isaac-ai-brain","slug":"/chapter-3-isaac-ai-brain/ros2-integration","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/ros2-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/gurupak/physical-ai-and-humanoid-robotics/tree/main/docs/chapter-3-isaac-ai-brain/ros2-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Dynamic Gait Transitions for Nav2 Humanoid Navigation","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/dynamic-gait-transitions"},"next":{"title":"Runtime Parameter Configuration","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/runtime-configuration"}}');var t=n(4848),r=n(8453);const s={},o="ROS2 Integration Guide",c={},l=[{value:"Quick Integration (5 minutes setup)",id:"quick-integration-5-minutes-setup",level:2},{value:"Step 1: Install Isaac ROS Packages",id:"step-1-install-isaac-ros-packages",level:3},{value:"Step 2: Configure Bridge Topics",id:"step-2-configure-bridge-topics",level:3},{value:"Step 3: Launch Isaac Bridge",id:"step-3-launch-isaac-bridge",level:3},{value:"Step 4: Launch and Verify Topics",id:"step-4-launch-and-verify-topics",level:3},{value:"Testing and Validation",id:"testing-and-validation",level:2},{value:"Verify Image Flow",id:"verify-image-flow",level:3},{value:"Test Joint Data Flow",id:"test-joint-data-flow",level:3},{value:"Integration Verification",id:"integration-verification",level:3},{value:"ROS2 Parameter Configuration",id:"ros2-parameter-configuration",level:2},{value:"Camera Settings",id:"camera-settings",level:3},{value:"Bridge Performance Tuning",id:"bridge-performance-tuning",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Bridge Errors",id:"common-bridge-errors",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Next Steps",id:"next-steps",level:2}];function m(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"ros2-integration-guide",children:"ROS2 Integration Guide"})}),"\n",(0,t.jsx)(a.p,{children:"Connect Isaac Sim simulation to ROS2 ecosystem for real-time data exchange and control."}),"\n",(0,t.jsx)(a.h2,{id:"quick-integration-5-minutes-setup",children:"Quick Integration (5 minutes setup)"}),"\n",(0,t.jsx)(a.h3,{id:"step-1-install-isaac-ros-packages",children:"Step 1: Install Isaac ROS Packages"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Install ROS2 Isaac packages\nsudo apt update && sudo apt install -y \\\n    ros-humble-isaac-ros-common \\\n    ros-humble-isaac-ros-ros-bridge \\\n    ros-humble-isaac-ros-nitros \\\n    ros-humble-isaac-ros-msgs\n\n# Install camera packages\nsudo apt install -y \\\n    ros-humble-image-pipeline \\\n    ros-humble-image-transport \\\n    ros-humble-cv-bridge\n"})}),"\n",(0,t.jsx)(a.h3,{id:"step-2-configure-bridge-topics",children:"Step 2: Configure Bridge Topics"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Create workspace if needed\nmkdir -p ~/isaac_ros_ws/src\ncd ~/isaac_ros_ws\n\n# Clone Isaac ROS examples\ngit clone https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_main.git src/isaac_ros_main\n\n# Build workspace\ncolcon build --packages-up-to isaac_ros_example\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(a.h3,{id:"step-3-launch-isaac-bridge",children:"Step 3: Launch Isaac Bridge"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",metastring:'title="isaac_ros_bridge.launch.py" - practical bridge configuration for Isaac Sim',children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Camera configuration matching our humanoid setup\n    camera_rate = 30  # per eye at 1080p\n    stereo_baseline = 0.12  # human-like\n\n    # Bridge configuration\n    isaac_config = {\n        'camera_left': {\n            'image_topic': '/isaac_camera/left/image_raw',\n            'camera_info_topic': '/isaac_camera/left/camera_info',\n            'fov': 90,\n            'width': 1920,\n            'height': 1080,\n            'position': [0.06, stereo_baseline/2, 1.6]  # Eye level baseline\n        },\n        'camera_right': {\n            'image_topic': '/isaac_camera/right/image_raw',\n            'camera_info_topic': '/isaac_camera/right/camera_info',\n            'fov': 90,\n            'width': 1920,\n            'height': 1080,\n            'position': [0.06, -stereo_baseline/2, 1.6]\n        },\n        'bridge_rate': camera_rate,\n        'image_transport': 'raw'\n    }\n\n    return LaunchDescription([\n        # Generate stereo cameras\n        Node(\n            package='isaac_ros_nitros',\n            executable='nitros_camera_png_sync_issue\n',\n            name='isaac_camera_bridge',\n            parameters=[{\n                'camera_left': isaac_config['camera_left'],\n                'camera_right': isaac_config['camera_right'],\n                'bridge_rate': isaac_config['bridge_rate']\n            }],\n            remappings=[\n                ('image_left', '/stereo_camera/left/image_isaac'),\n                ('image_right', '/stereo_camera/right/image_isaac'),\n                ('camera_info_left', '/stereo_camera/left/camera_info_isaac'),\n                ('camera_info_right', '/stereo_camera/right/camera_info_isaac')\n            ]\n        ),\n\n        # Bridge to standard ROS2 topics\n        Node(\n            package='image_transport',\n            executable='image_republisher',\n            name='stereo_image_bridge',\n            remappings=[\n                ('in/image_raw', '/stereo_camera/left/image_isaac'),\n                ('out/image_raw', '/left_camera/image_isaac'),\n                ('in/image_raw', '/stereo_camera/right/image_isaac'),\n                ('out/image_raw', '/right_camera/image_isaac')\n            ]\n        ),\n\n        # Publish joint states from humanoid\n        Node(\n            package='isaac_ros_understanding',\n            executable='isaac_h1_state_publisher',\n            name='humanoid_state_publisher',\n            parameters=[{\n               'robot_description': 'h1 humanoid',  # Reference to H1 model\n                'publish_rate': 50,\n                'frame_id': 'base_link'\n            }],\n            remappings=[\n                ('/joint_states', '/state/joint_states_raw'),\n                ('/pose', '/odometry')\n            ]\n        )\n    ])\n"})}),"\n",(0,t.jsx)(a.h3,{id:"step-4-launch-and-verify-topics",children:"Step 4: Launch and Verify Topics"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:'# Terminal 1: Start Isaac Sim with ROS2 bridge\n./isaac-sim.sh \\\n  --scene-path="/Isaac/Environments/Simple_Warehouse/multi_shelves" \\\n  --ros-bridge > ros_test.log 2>&1\n\n# Terminal 2: Launch ROS2 bridge\nros2 launch isaac_ros_bridge.launch.py\n\n# Terminal 3: Verify topics exist\nros2 topic list | grep -E "(camera|isaac|stereo)"\n\n# Expected output:\n# /isaac_camera/left/image_raw\n# /isaac_camera/right/image_raw\n# /stereo_camera/left/image_isaac\n# /stereo_camera/right/image_isaac\n# /state/joint_states\n'})}),"\n",(0,t.jsx)(a.h2,{id:"testing-and-validation",children:"Testing and Validation"}),"\n",(0,t.jsx)(a.h3,{id:"verify-image-flow",children:"Verify Image Flow"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:'# Test camera quality\nros2 topic hz /left_camera/image_isaac\n# Expected: ~30 FPS\n\n# View camera images\nros2 run rqt_image_view rqt_image_view\n# Select /left_camera/image_isaac topic\n\n# Check image resolution\nros2 topic echo /left_camera/image_isaac --once\n# Look for "width: 1920, height: 1080"\n'})}),"\n",(0,t.jsx)(a.h3,{id:"test-joint-data-flow",children:"Test Joint Data Flow"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",metastring:'title="test_joint_pub.py - validation script" This runtime verification checks humanoid geometry security',children:"\n#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom builtin_interfaces.msg import Time\n\nclass IsaacValidation(Node):\n    def __init__(self):\n        super().__init__('isaac_validation')\n        self.subscription = self.create_subscription(\n            JointState,\n            '/state/joint_states',\n            self.joint_callback,\n            10)\n        self.joint_count = 0\n\n    def joint_callback(self, msg):\n        self.joint_count += 1\n\n        # Validate humanoid H1 has expected joints\n        expected_joints = {\n            'left_hip_pitch', 'left_hip_roll', 'left_hip_yaw',\n            'left_knee', 'left_ankle_pitch', 'left_anklet_roll',\n            'right_hip_pitch', 'right_hip_roll', 'right_hip_yaw',\n            'right_knee', 'right_ankle_pitch', 'right_ankle_roll',\n            'torso_pitch', 'torso_yaw', 'left_shoulder_pitch', # 19 DoF expected\n            'left_shoulder_roll', 'left_shoulder_yaw', 'left_elbow',\n            'right_shoulder_pitch', 'right_shoulder_roll', 'right_shoulder_yaw'\n        } and 'right_elbow'\n        }\n\n        joint_names = set(msg.name)\n        missing_joints = expected_joints - joint_names\n        extra_joints = joint_names - expected_joints\n\n        if len(missing_joints) == 0:\n            self.get_logger().info('\u2705 Joint topology matches H1 humanoid')\n        else:\n            self.get_logger().warn(f'\ud83d\udea7 Missing joints: {missing_joints}')\n\n        if len(extra_joints) > 0:\n            self.get_logger().info(f'\u2139\ufe0f Extra joints detected: {extra_joints}')\n\n        if self.joint_count % 30 == 0:  # Every 30 messages\n            self.get_logger().info(f'Data quality: {len(msg.position)} positions,@ {msg.header.stamp.sec}.{msg.header.stamp.nanosec}')\n\ndef main():\n    rclpy.init()\n    validator = IsaacValidation()\n    try:\n        rclpy.spin(validator)\n    except KeyboardInterrupt:\n        pass\n    validator.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(a.h3,{id:"integration-verification",children:"Integration Verification"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Test the complete loop\nros2 run rqt_gui rqt_gui &\ndisconnect &\ncheck with tools\n\n# Monitor performance\nhtop  # Real-time CPU/GPU usage\niotop  # Disk I/O impact (critical if headless)\nnvtop  # GPU-specific metrics\n"})}),"\n",(0,t.jsx)(a.h2,{id:"ros2-parameter-configuration",children:"ROS2 Parameter Configuration"}),"\n",(0,t.jsx)(a.h3,{id:"camera-settings",children:"Camera Settings"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-yaml",metastring:'title="isaac_ros_camera_config.yaml"',children:'# Configuration for Isaac ROS camera bridge\nisaac_ros_camera_bridge:\n  ros__parameters:\n    # Camera resolution matching Isaac Sim output\n    image_width: 1920\n    image_height: 1080\n    frame_rate: 30.0\n    encoding: "bgr8"\n    fov: 90.0\n\n    # Distortion model matching Isaac Sim camera\n    distortion_model: "plumb_bob"\n    D: [-0.02, 0.05, 0.001, 0.001, 0.0]\n    K: [1518.809, 0.0, 1130.488,\n        0.0, 1518.809, 629.245,\n        0.0, 0.0, 1.0 ]\n\n    # Humanoid perspective center\n    camera_optical_frame: "h1_left_camera_optical_frame"\n    humanoid_base_frame: "base_link"\n'})}),"\n",(0,t.jsx)(a.h3,{id:"bridge-performance-tuning",children:"Bridge Performance Tuning"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-yaml",metastring:'title="isaac_rooo_bridge_performance.yaml"',children:'ros2_bridge:\n  parameters:\n    # Bandwidth management\n    queue_size: 5  # Helps with GPU-CPU transfers\n    publish_rate: 30  # Matches camera frame rate\n\n    # Memory management\n    memory_buffer_size: 256  # MB for incoming textures\n    texture_cache_size: 16  # Number of cached images\n\n    # Compression for remote viewing\n    quality_level: "high"  # Uses JPEG compression strategy\n'})}),"\n",(0,t.jsx)(a.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(a.h3,{id:"common-bridge-errors",children:"Common Bridge Errors"}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Error"}),(0,t.jsx)(a.th,{children:"Cause"}),(0,t.jsx)(a.th,{children:"Solution"})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:'"No images received"'}),(0,t.jsx)(a.td,{children:"Isaac Sim not publishing"}),(0,t.jsx)(a.td,{children:"Run with --ros-bridge flag"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:'"Wrong topic format"'}),(0,t.jsx)(a.td,{children:"ROS2 version mismatch"}),(0,t.jsx)(a.td,{children:"Ensure Humble compatibility"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:'"Missing transforms"'}),(0,t.jsx)(a.td,{children:"TF tree incomplete"}),(0,t.jsx)(a.td,{children:"Check robot URDF loading"})]})]})]}),"\n",(0,t.jsx)(a.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Reduce message overhead\nros2 param set /camera_bridge use_compressions true\nros2 param set /robot_state_publisher publish_rate 10  # Reduce from 50hz\n\n# Lower image rate for CPU-bound systems\nros2 param set /stereo_image_bridge publish_every_n_frames 2\n\n# Check efficiency with:\nros2 topic hz /left_camera/image_isaac\n"})}),"\n",(0,t.jsx)(a.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsx)(a.p,{children:"After successful integration:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/runtime-configuration",children:"Configure Runtime Parameters"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/isaac-ros-vslam-overview",children:"Explore Isaac ROS VSLAM"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/isaac-sim-synthetic-data",children:"Learn about Synthetic Data"})}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"The bridge is now providing real-time camera feeds and robot state data that can be consumed by any ROS2 application, enabling seamless integration between Isaac Sim and your robotics stack."})]})}function d(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}}}]);