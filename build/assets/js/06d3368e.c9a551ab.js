"use strict";(self.webpackChunkhackathon_book=self.webpackChunkhackathon_book||[]).push([[1640],{8453:(e,r,a)=>{a.d(r,{R:()=>s,x:()=>o});var n=a(6540);const i={},t=n.createContext(i);function s(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(t.Provider,{value:r},e.children)}},9380:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"chapter-3-isaac-ai-brain/ros2-integration","title":"ROS2 Integration Guide","description":"Connect Isaac Sim simulation to ROS2 ecosystem for real-time data exchange and control.","source":"@site/docs/chapter-3-isaac-ai-brain/ros2-integration.md","sourceDirName":"chapter-3-isaac-ai-brain","slug":"/chapter-3-isaac-ai-brain/ros2-integration","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/ros2-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/gurupak/physical-ai-and-humanoid-robotics/tree/main/docs/chapter-3-isaac-ai-brain/ros2-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Dynamic Gait Transitions for Nav2 Humanoid Navigation","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/dynamic-gait-transitions"},"next":{"title":"Runtime Parameter Configuration","permalink":"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/runtime-configuration"}}');var i=a(4848),t=a(8453);const s={},o="ROS2 Integration Guide",c={},l=[{value:"Quick Integration (5 minutes setup)",id:"quick-integration-5-minutes-setup",level:2},{value:"Step 1: Install Isaac ROS Packages",id:"step-1-install-isaac-ros-packages",level:3},{value:"Step 2: Configure Bridge Topics",id:"step-2-configure-bridge-topics",level:3},{value:"Step 3: Launch Isaac Bridge",id:"step-3-launch-isaac-bridge",level:3},{value:"Step 4: Launch and Verify Topics",id:"step-4-launch-and-verify-topics",level:3},{value:"Testing and Validation",id:"testing-and-validation",level:2},{value:"Verify Image Flow",id:"verify-image-flow",level:3},{value:"Test Joint Data Flow",id:"test-joint-data-flow",level:3},{value:"Integration Verification",id:"integration-verification",level:3},{value:"ROS2 Parameter Configuration",id:"ros2-parameter-configuration",level:2},{value:"Camera Settings",id:"camera-settings",level:3},{value:"Bridge Performance Tuning",id:"bridge-performance-tuning",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Bridge Errors",id:"common-bridge-errors",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Next Steps",id:"next-steps",level:2}];function m(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"ros2-integration-guide",children:"ROS2 Integration Guide"})}),"\n",(0,i.jsx)(r.p,{children:"Connect Isaac Sim simulation to ROS2 ecosystem for real-time data exchange and control."}),"\n",(0,i.jsx)(r.h2,{id:"quick-integration-5-minutes-setup",children:"Quick Integration (5 minutes setup)"}),"\n",(0,i.jsx)(r.h3,{id:"step-1-install-isaac-ros-packages",children:"Step 1: Install Isaac ROS Packages"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Install ROS2 Isaac packages\r\nsudo apt update && sudo apt install -y \\\r\n    ros-humble-isaac-ros-common \\\r\n    ros-humble-isaac-ros-ros-bridge \\\r\n    ros-humble-isaac-ros-nitros \\\r\n    ros-humble-isaac-ros-msgs\r\n\r\n# Install camera packages\r\nsudo apt install -y \\\r\n    ros-humble-image-pipeline \\\r\n    ros-humble-image-transport \\\r\n    ros-humble-cv-bridge\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-2-configure-bridge-topics",children:"Step 2: Configure Bridge Topics"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Create workspace if needed\r\nmkdir -p ~/isaac_ros_ws/src\r\ncd ~/isaac_ros_ws\r\n\r\n# Clone Isaac ROS examples\r\ngit clone https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_main.git src/isaac_ros_main\r\n\r\n# Build workspace\r\ncolcon build --packages-up-to isaac_ros_example\r\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-3-launch-isaac-bridge",children:"Step 3: Launch Isaac Bridge"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",metastring:'title="isaac_ros_bridge.launch.py" - practical bridge configuration for Isaac Sim',children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Camera configuration matching our humanoid setup\r\n    camera_rate = 30  # per eye at 1080p\r\n    stereo_baseline = 0.12  # human-like\r\n\r\n    # Bridge configuration\r\n    isaac_config = {\r\n        'camera_left': {\r\n            'image_topic': '/isaac_camera/left/image_raw',\r\n            'camera_info_topic': '/isaac_camera/left/camera_info',\r\n            'fov': 90,\r\n            'width': 1920,\r\n            'height': 1080,\r\n            'position': [0.06, stereo_baseline/2, 1.6]  # Eye level baseline\r\n        },\r\n        'camera_right': {\r\n            'image_topic': '/isaac_camera/right/image_raw',\r\n            'camera_info_topic': '/isaac_camera/right/camera_info',\r\n            'fov': 90,\r\n            'width': 1920,\r\n            'height': 1080,\r\n            'position': [0.06, -stereo_baseline/2, 1.6]\r\n        },\r\n        'bridge_rate': camera_rate,\r\n        'image_transport': 'raw'\r\n    }\r\n\r\n    return LaunchDescription([\r\n        # Generate stereo cameras\r\n        Node(\r\n            package='isaac_ros_nitros',\r\n            executable='nitros_camera_png_sync_issue\r\n',\r\n            name='isaac_camera_bridge',\r\n            parameters=[{\r\n                'camera_left': isaac_config['camera_left'],\r\n                'camera_right': isaac_config['camera_right'],\r\n                'bridge_rate': isaac_config['bridge_rate']\r\n            }],\r\n            remappings=[\r\n                ('image_left', '/stereo_camera/left/image_isaac'),\r\n                ('image_right', '/stereo_camera/right/image_isaac'),\r\n                ('camera_info_left', '/stereo_camera/left/camera_info_isaac'),\r\n                ('camera_info_right', '/stereo_camera/right/camera_info_isaac')\r\n            ]\r\n        ),\r\n\r\n        # Bridge to standard ROS2 topics\r\n        Node(\r\n            package='image_transport',\r\n            executable='image_republisher',\r\n            name='stereo_image_bridge',\r\n            remappings=[\r\n                ('in/image_raw', '/stereo_camera/left/image_isaac'),\r\n                ('out/image_raw', '/left_camera/image_isaac'),\r\n                ('in/image_raw', '/stereo_camera/right/image_isaac'),\r\n                ('out/image_raw', '/right_camera/image_isaac')\r\n            ]\r\n        ),\r\n\r\n        # Publish joint states from humanoid\r\n        Node(\r\n            package='isaac_ros_understanding',\r\n            executable='isaac_h1_state_publisher',\r\n            name='humanoid_state_publisher',\r\n            parameters=[{\r\n               'robot_description': 'h1 humanoid',  # Reference to H1 model\r\n                'publish_rate': 50,\r\n                'frame_id': 'base_link'\r\n            }],\r\n            remappings=[\r\n                ('/joint_states', '/state/joint_states_raw'),\r\n                ('/pose', '/odometry')\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-4-launch-and-verify-topics",children:"Step 4: Launch and Verify Topics"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'# Terminal 1: Start Isaac Sim with ROS2 bridge\r\n./isaac-sim.sh \\\r\n  --scene-path="/Isaac/Environments/Simple_Warehouse/multi_shelves" \\\r\n  --ros-bridge > ros_test.log 2>&1\r\n\r\n# Terminal 2: Launch ROS2 bridge\r\nros2 launch isaac_ros_bridge.launch.py\r\n\r\n# Terminal 3: Verify topics exist\r\nros2 topic list | grep -E "(camera|isaac|stereo)"\r\n\r\n# Expected output:\r\n# /isaac_camera/left/image_raw\r\n# /isaac_camera/right/image_raw\r\n# /stereo_camera/left/image_isaac\r\n# /stereo_camera/right/image_isaac\r\n# /state/joint_states\n'})}),"\n",(0,i.jsx)(r.h2,{id:"testing-and-validation",children:"Testing and Validation"}),"\n",(0,i.jsx)(r.h3,{id:"verify-image-flow",children:"Verify Image Flow"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'# Test camera quality\r\nros2 topic hz /left_camera/image_isaac\r\n# Expected: ~30 FPS\r\n\r\n# View camera images\r\nros2 run rqt_image_view rqt_image_view\r\n# Select /left_camera/image_isaac topic\r\n\r\n# Check image resolution\r\nros2 topic echo /left_camera/image_isaac --once\r\n# Look for "width: 1920, height: 1080"\n'})}),"\n",(0,i.jsx)(r.h3,{id:"test-joint-data-flow",children:"Test Joint Data Flow"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",metastring:'title="test_joint_pub.py - validation script" This runtime verification checks humanoid geometry security',children:"\r\n#!/usr/bin/env python3\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom builtin_interfaces.msg import Time\r\n\r\nclass IsaacValidation(Node):\r\n    def __init__(self):\r\n        super().__init__('isaac_validation')\r\n        self.subscription = self.create_subscription(\r\n            JointState,\r\n            '/state/joint_states',\r\n            self.joint_callback,\r\n            10)\r\n        self.joint_count = 0\r\n\r\n    def joint_callback(self, msg):\r\n        self.joint_count += 1\r\n\r\n        # Validate humanoid H1 has expected joints\r\n        expected_joints = {\r\n            'left_hip_pitch', 'left_hip_roll', 'left_hip_yaw',\r\n            'left_knee', 'left_ankle_pitch', 'left_anklet_roll',\r\n            'right_hip_pitch', 'right_hip_roll', 'right_hip_yaw',\r\n            'right_knee', 'right_ankle_pitch', 'right_ankle_roll',\r\n            'torso_pitch', 'torso_yaw', 'left_shoulder_pitch', # 19 DoF expected\r\n            'left_shoulder_roll', 'left_shoulder_yaw', 'left_elbow',\r\n            'right_shoulder_pitch', 'right_shoulder_roll', 'right_shoulder_yaw'\r\n        } and 'right_elbow'\r\n        }\r\n\r\n        joint_names = set(msg.name)\r\n        missing_joints = expected_joints - joint_names\r\n        extra_joints = joint_names - expected_joints\r\n\r\n        if len(missing_joints) == 0:\r\n            self.get_logger().info('\u2705 Joint topology matches H1 humanoid')\r\n        else:\r\n            self.get_logger().warn(f'\ud83d\udea7 Missing joints: {missing_joints}')\r\n\r\n        if len(extra_joints) > 0:\r\n            self.get_logger().info(f'\u2139\ufe0f Extra joints detected: {extra_joints}')\r\n\r\n        if self.joint_count % 30 == 0:  # Every 30 messages\r\n            self.get_logger().info(f'Data quality: {len(msg.position)} positions,@ {msg.header.stamp.sec}.{msg.header.stamp.nanosec}')\r\n\r\ndef main():\r\n    rclpy.init()\r\n    validator = IsaacValidation()\r\n    try:\r\n        rclpy.spin(validator)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    validator.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h3,{id:"integration-verification",children:"Integration Verification"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Test the complete loop\r\nros2 run rqt_gui rqt_gui &\r\ndisconnect &\r\ncheck with tools\r\n\r\n# Monitor performance\r\nhtop  # Real-time CPU/GPU usage\r\niotop  # Disk I/O impact (critical if headless)\r\nnvtop  # GPU-specific metrics\n"})}),"\n",(0,i.jsx)(r.h2,{id:"ros2-parameter-configuration",children:"ROS2 Parameter Configuration"}),"\n",(0,i.jsx)(r.h3,{id:"camera-settings",children:"Camera Settings"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'title="isaac_ros_camera_config.yaml"',children:'# Configuration for Isaac ROS camera bridge\r\nisaac_ros_camera_bridge:\r\n  ros__parameters:\r\n    # Camera resolution matching Isaac Sim output\r\n    image_width: 1920\r\n    image_height: 1080\r\n    frame_rate: 30.0\r\n    encoding: "bgr8"\r\n    fov: 90.0\r\n\r\n    # Distortion model matching Isaac Sim camera\r\n    distortion_model: "plumb_bob"\r\n    D: [-0.02, 0.05, 0.001, 0.001, 0.0]\r\n    K: [1518.809, 0.0, 1130.488,\r\n        0.0, 1518.809, 629.245,\r\n        0.0, 0.0, 1.0 ]\r\n\r\n    # Humanoid perspective center\r\n    camera_optical_frame: "h1_left_camera_optical_frame"\r\n    humanoid_base_frame: "base_link"\n'})}),"\n",(0,i.jsx)(r.h3,{id:"bridge-performance-tuning",children:"Bridge Performance Tuning"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'title="isaac_rooo_bridge_performance.yaml"',children:'ros2_bridge:\r\n  parameters:\r\n    # Bandwidth management\r\n    queue_size: 5  # Helps with GPU-CPU transfers\r\n    publish_rate: 30  # Matches camera frame rate\r\n\r\n    # Memory management\r\n    memory_buffer_size: 256  # MB for incoming textures\r\n    texture_cache_size: 16  # Number of cached images\r\n\r\n    # Compression for remote viewing\r\n    quality_level: "high"  # Uses JPEG compression strategy\n'})}),"\n",(0,i.jsx)(r.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(r.h3,{id:"common-bridge-errors",children:"Common Bridge Errors"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Error"}),(0,i.jsx)(r.th,{children:"Cause"}),(0,i.jsx)(r.th,{children:"Solution"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:'"No images received"'}),(0,i.jsx)(r.td,{children:"Isaac Sim not publishing"}),(0,i.jsx)(r.td,{children:"Run with --ros-bridge flag"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:'"Wrong topic format"'}),(0,i.jsx)(r.td,{children:"ROS2 version mismatch"}),(0,i.jsx)(r.td,{children:"Ensure Humble compatibility"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:'"Missing transforms"'}),(0,i.jsx)(r.td,{children:"TF tree incomplete"}),(0,i.jsx)(r.td,{children:"Check robot URDF loading"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Reduce message overhead\r\nros2 param set /camera_bridge use_compressions true\r\nros2 param set /robot_state_publisher publish_rate 10  # Reduce from 50hz\r\n\r\n# Lower image rate for CPU-bound systems\r\nros2 param set /stereo_image_bridge publish_every_n_frames 2\r\n\r\n# Check efficiency with:\r\nros2 topic hz /left_camera/image_isaac\n"})}),"\n",(0,i.jsx)(r.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(r.p,{children:"After successful integration:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/runtime-configuration",children:"Configure Runtime Parameters"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/isaac-ros-vslam-overview",children:"Explore Isaac ROS VSLAM"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/physical-ai-and-humanoid-robotics/docs/chapter-3-isaac-ai-brain/isaac-sim-synthetic-data",children:"Learn about Synthetic Data"})}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"The bridge is now providing real-time camera feeds and robot state data that can be consumed by any ROS2 application, enabling seamless integration between Isaac Sim and your robotics stack."})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}}}]);